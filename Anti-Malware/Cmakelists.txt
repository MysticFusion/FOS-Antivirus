cmake_minimum_required(VERSION 3.17)
project(AntivirusFYP C)
set(CMAKE_C_STANDARD 11)
# 1. Find GTK4 (Frontend)
find_package(PkgConfig REQUIRED)
pkg_check_modules(GTK4 REQUIRED gtk4)
# 2. Include Directories
include_directories(
    ${CMAKE_SOURCE_DIR}
    ${CMAKE_SOURCE_DIR}/ui
    ${CMAKE_SOURCE_DIR}/backend
    ${GTK4_INCLUDE_DIRS}
)
link_directories(${GTK4_LIBRARY_DIRS})
add_definitions(${GTK4_CFLAGS_OTHER})
# 3. Add Executable with ALL Source Files
add_executable(AntivirusUI 
    main.c
    app.c
    # UI Files
    ui/ui_sidebar.c
    ui/ui_views.c
    ui/ui_scan.c
    ui/ui_history.c
    ui/ui_update.c
    # Backend Files
    backend/scan_core.c
    backend/signature_scan.c
    backend/sha2.c
    #backend/feature_extract.c
    #backend/heuristic_engine.c


)
# 4. Setup Properties (No Console Window on Windows)
set_target_properties(AntivirusUI PROPERTIES WIN32_EXECUTABLE true)
# 5. Link Libraries
target_link_libraries(AntivirusUI 
    ${GTK4_LIBRARIES}
    ws2_32
    urlmon
)